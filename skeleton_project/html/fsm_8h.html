<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heis-prosjekt: source/fsm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Heis-prosjekt
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fsm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The finite state machine.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="timer_8h_source.html">timer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="elevator_8h_source.html">elevator.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fsm.h:</div>
<div class="dyncontent">
<div class="center"><img src="fsm_8h__incl.png" border="0" usemap="#source_2fsm_8h" alt=""/></div>
<map name="source_2fsm_8h" id="source_2fsm_8h">
<area shape="rect" id="node2" href="timer_8h.html" title="Functions to keep the door open for a period of time. " alt="" coords="71,155,134,181"/>
<area shape="rect" id="node9" href="elevator_8h.html" title="Provides communication between the elevator and the hardware. " alt="" coords="189,80,267,107"/>
<area shape="rect" id="node5" href="states_8h.html" title="Creates a struct for the elevator and an enumerator for its different states. " alt="" coords="157,229,227,256"/>
<area shape="rect" id="node8" href="hardware_8h.html" title="Driver for the elevator hardware. " alt="" coords="353,304,439,331"/>
<area shape="rect" id="node10" href="queue_8h.html" title="Takes care of the elevator&#39;s queue. " alt="" coords="158,155,226,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="fsm_8h__dep__incl.png" border="0" usemap="#source_2fsm_8hdep" alt=""/></div>
<map name="source_2fsm_8hdep" id="source_2fsm_8hdep">
<area shape="rect" id="node2" href="fsm_8c_source.html" title="source/fsm.c" alt="" coords="5,80,104,107"/>
<area shape="rect" id="node3" href="main_8c_source.html" title="source/main.c" alt="" coords="128,80,232,107"/>
</map>
</div>
</div>
<p><a href="fsm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a544184483e70276bdd08ea9387c759dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#a544184483e70276bdd08ea9387c759dc">fsm_init</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:a544184483e70276bdd08ea9387c759dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the elevator and moves it to a defined state.  <a href="#a544184483e70276bdd08ea9387c759dc">More...</a><br /></td></tr>
<tr class="separator:a544184483e70276bdd08ea9387c759dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b8638db8400e3a58de8a714900b88e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#a55b8638db8400e3a58de8a714900b88e">fsm_switch</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:a55b8638db8400e3a58de8a714900b88e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop that controls the elevator. Contains the logic for the finite state machine.  <a href="#a55b8638db8400e3a58de8a714900b88e">More...</a><br /></td></tr>
<tr class="separator:a55b8638db8400e3a58de8a714900b88e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac27fb6111ea92a93c516024ba4f96ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#aac27fb6111ea92a93c516024ba4f96ef">fsm_idle</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:aac27fb6111ea92a93c516024ba4f96ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when the elevator is in state IDLE. If there is a request at current floor, enters state <code>DOOR_OPEN</code>. Otherwise if there is a request above or below, enters state <code>MOVE</code>.  <a href="#aac27fb6111ea92a93c516024ba4f96ef">More...</a><br /></td></tr>
<tr class="separator:aac27fb6111ea92a93c516024ba4f96ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d1c77afef3d5331db952c4812d22a1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#a5d1c77afef3d5331db952c4812d22a1f">fsm_move</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:a5d1c77afef3d5331db952c4812d22a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when the elevator is in state MOVE. Sets direction and starts the motor. If the elevator should take order at current floor, enters state <code>IDLE</code>.  <a href="#a5d1c77afef3d5331db952c4812d22a1f">More...</a><br /></td></tr>
<tr class="separator:a5d1c77afef3d5331db952c4812d22a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9967fc494ad00be3ebde2163464c016f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#a9967fc494ad00be3ebde2163464c016f">fsm_door_open</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:a9967fc494ad00be3ebde2163464c016f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when the elevator is in state DOOR OPEN. Commands door open, starts the timer and checks for any obstructions. Closes the door when the time is up and clears excecuted orders. Then enters state <code>IDLE</code>.  <a href="#a9967fc494ad00be3ebde2163464c016f">More...</a><br /></td></tr>
<tr class="separator:a9967fc494ad00be3ebde2163464c016f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c1174f8092050b76f11aa072901ce3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fsm_8h.html#a69c1174f8092050b76f11aa072901ce3">fsm_emergency_stop</a> (<a class="el" href="structelevator.html">elevator</a> *el)</td></tr>
<tr class="memdesc:a69c1174f8092050b76f11aa072901ce3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function called when the elevator is in state EMERGENCY STOP. Stops the elevator and sets the stop light. Clears the queue. If the elevator is at a floor the door is opened and when the stop button is released the elevator enters state <code>DOOR_OPEN</code>. Otherwise it awaits until any requests is made, and then enters <code>MOVE</code>.  <a href="#a69c1174f8092050b76f11aa072901ce3">More...</a><br /></td></tr>
<tr class="separator:a69c1174f8092050b76f11aa072901ce3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The finite state machine. </p>

<p class="definition">Definition in file <a class="el" href="fsm_8h_source.html">fsm.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9967fc494ad00be3ebde2163464c016f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9967fc494ad00be3ebde2163464c016f">&#9670;&nbsp;</a></span>fsm_door_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_door_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called when the elevator is in state DOOR OPEN. Commands door open, starts the timer and checks for any obstructions. Closes the door when the time is up and clears excecuted orders. Then enters state <code>IDLE</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00079">79</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a69c1174f8092050b76f11aa072901ce3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c1174f8092050b76f11aa072901ce3">&#9670;&nbsp;</a></span>fsm_emergency_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_emergency_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called when the elevator is in state EMERGENCY STOP. Stops the elevator and sets the stop light. Clears the queue. If the elevator is at a floor the door is opened and when the stop button is released the elevator enters state <code>DOOR_OPEN</code>. Otherwise it awaits until any requests is made, and then enters <code>MOVE</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00109">109</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="aac27fb6111ea92a93c516024ba4f96ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac27fb6111ea92a93c516024ba4f96ef">&#9670;&nbsp;</a></span>fsm_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_idle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called when the elevator is in state IDLE. If there is a request at current floor, enters state <code>DOOR_OPEN</code>. Otherwise if there is a request above or below, enters state <code>MOVE</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00053">53</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a544184483e70276bdd08ea9387c759dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a544184483e70276bdd08ea9387c759dc">&#9670;&nbsp;</a></span>fsm_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the elevator and moves it to a defined state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00003">3</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a5d1c77afef3d5331db952c4812d22a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d1c77afef3d5331db952c4812d22a1f">&#9670;&nbsp;</a></span>fsm_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_move </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function called when the elevator is in state MOVE. Sets direction and starts the motor. If the elevator should take order at current floor, enters state <code>IDLE</code>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00065">65</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
<a id="a55b8638db8400e3a58de8a714900b88e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b8638db8400e3a58de8a714900b88e">&#9670;&nbsp;</a></span>fsm_switch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fsm_switch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structelevator.html">elevator</a> *&#160;</td>
          <td class="paramname"><em>el</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop that controls the elevator. Contains the logic for the finite state machine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">el</td><td>The elevator. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="fsm_8c_source.html#l00023">23</a> of file <a class="el" href="fsm_8c_source.html">fsm.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
